---
title: 프로그램, 프로세스, 스레드
tag: html
---

# 프로그램, 프로세스, 스레드
## 프로그램

- 어떤 작업을 위해 실행할 수 있는 파일

- 저장 장치에 저장돼 있으나 메모리에는 올라가 있지 않은 정적인 상태

  > 모든 프로그램은 메모리 공간이 할당돼야 실행 가능함. 프로그램은 운영체제가 독립적인 메모리 공간을 아직  할당 하지 않았음(정적인 상태).

- 실행되지 않은 파일/코드 덩어리 자체를 가리킴 (`*.exe`, `*.dmg` 등)

## 프로세스

- 의미

  - 운영체제로부터 자원을 할당받은 **작업** 단위
  - 연속적으로 실행되고 있는 컴퓨터 프로그램

  - 메모리에 올라와 실행되고 있는 프로그램의 인스턴스(독립적인 개체)(동적인 상태)

  - 운영체제로부터 시스템 자원 할당받는 작업의 단위

- 구조 (출처: [Heee's Development Blog](https://gmlwjd9405.github.io/2018/09/14/process-vs-thread.html))

![img](2022-08-31-프로그램-프로세스-스레드/process-16582943220229.png)

- 특징

  - 각각 독립된 메모리 역역(Code, Data, Stack, Heap 구조) 할당 받음

  - 기본적으로 프로세스당 최소 1개 스레드(메인 스레드) 가짐

  - 각 프로세스는 별도 주소 공간에서 실행되며, 서로 다른 프로세스의 변수나 자료 구조에는 접근할 수 없음

  - 다른 프로세스의 자원에 접근하려면 프로세스 간 통신(Inter-Process Communication) 사용해야 함

## 스레드

- 의미
  - 프로세스 내에서 실행되는 여러 흐름의 단위
  - 프로세스의 특정한 수행 경로
  - 프로세스가 할당받은 자원을 이용하는 실행 단위
- 구조 (출처: [Heee's Development Blog](https://gmlwjd9405.github.io/2018/09/14/process-vs-thread.html))

![img](2022-08-31-프로그램-프로세스-스레드/thread-165829433794411.png)

- 특징
  - 프로세스 내에서 각각 Stack 만 할당받고 Code, Data, Heap 영역은 공유
  - 같은 프로세스 내 스레드끼리 프로세스 내 주소 공간이나 자원들 공유하며 실행됨
  - 각각 별도 레지스터와 스택 갖고 있으나, 힙 메모리는 서로 읽거나 쓸 수 있음
  - 한 스레드의 프로세스 자원이 변경되면, 다른 이웃 스레드도 해당 변경 결과 볼 수 있음

# 멀티 프로세스와 멀티 스레드 차이

## 멀티 프로세스

하나의 응용프로그램을 여러 프로세스로 구성, 각 프로세스가 하나의 작업을 처리하도록 하는 것

- 장점

  - 여러 프로세스 중 하나에 문제가 발생해도 다른 프로세스에 영향 없음

- 단점

  - Context Switching 비용 발생(오버헤드)

    > Context Switching
    >
    > CPU가 여러 프로세스 돌아가면서 작업처리하는 과정.
    >
    > 동작중인 프로세스가 대기하면서 해다 프로세스 상태(Context) 보관, 다음 프로세스 동작하면서 이전에 보관했던 프로세스 상태 복구하는 작업

    - 캐쉬메모리 초기화 등 무거운 작업 진행, 시간 소모 등의 오버헤드 발생
    - 프로세스 간 공유 메모리 없어, Context Switching 발생시 캐쉬데이터 리셋 후 다시 불러와야함

  - 프로세스 간 복잡한 통신 기법(IPC)

    - 한 프로그램 내 프로세스 간 변수 공유 불가



## 멀티 스레드

하나의 응용프로그램을 여러 스레드로 구성, 각 스레드가 하나의 작업을 처리하도록 하는 것

윈도우, 리눅스 등 멀티 프로세싱 지원하나 멀티 스레딩 기본으로 지원, 대표적인 멀티 스레드 응용 프로그램으로 웹 서버 존재

- 장점
  - 시스템 자원 소모 감소 (자원의 효율성 증대)
    - 프로세스 생성해 자원을 할당하는 시스템 콜이 줄어 자원의 효율적 관리 가능
  - 시스템 처리량 증가 (처리 비용 감소)
    - 스레든 간 작업량 자가 Context Switching 빠름
  - 간단한 통신 방법으로 인한 프로그램 응답 시간 단축
    - Stack 제외 모든 메모리 공유 → 통신 부담 적음
- 단점
  - 세밀한 설계 필요
  - 디버깅 까다로움
  - 단일 프로세스 시스템의 경우 효과 기대 어려움
  - 다른 프로세스에서 스레드 제어 불가
  - 자원 공유 문제 발생 (동기화 문제)
  - 하나의 스레드에 문제 발생시 전체 프로세스가 영향 받음

## 멀티 스레드 사용하는 이유

멀티 스레드 사용 = 프로그램을 여러 개 사용하지 않고 하나의 프로그램 안에서 여러 작업 해결

![img](2022-08-31-프로그램-프로세스-스레드/multi-thread-165830782809913.png)

(출처: [Heee's Development Blog](https://gmlwjd9405.github.io/2018/09/14/process-vs-thread.html))

1. 자원 효율성 증대
2. 처리 비용 감소 및 응답 시간 단축

주의점

- 동기화 문제

  > 스레드 간 자원 공유시 전역 변수(데이터 세그먼트) 이용하므로 함께 사용될 때 충돌 발생 가능
