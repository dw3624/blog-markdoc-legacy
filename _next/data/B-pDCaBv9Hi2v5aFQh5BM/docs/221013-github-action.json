{"pageProps":{"markdoc":{"content":{"$$mdtype":"Tag","name":"article","attributes":{},"children":[{"$$mdtype":"Tag","name":"p","attributes":{},"children":["프로젝트 생성"]},{"$$mdtype":"Tag","name":"Fence","attributes":{"data-language":"bash"},"children":["$ npx create-next-app@latest\n$ cd my-app/\n"]},{"$$mdtype":"Tag","name":"p","attributes":{},"children":["package.json"]},{"$$mdtype":"Tag","name":"ul","attributes":{},"children":[{"$$mdtype":"Tag","name":"li","attributes":{},"children":["export 추가"]}]},{"$$mdtype":"Tag","name":"Fence","attributes":{"data-language":"json"},"children":["{\n  ...\n  \"scripts\": {\n    \"dev\": \"next dev\",\n    \"build\": \"next build\",\n    \"start\": \"next start\",\n    \"export\": \"next export\"\n  },\n  ...\n}\n"]},{"$$mdtype":"Tag","name":"p","attributes":{},"children":["(선택)"," ","로컬서버로 동작 확인"]},{"$$mdtype":"Tag","name":"Fence","attributes":{"data-language":"bash"},"children":["$ npm i --save-dev serve\n$ npx serve out\n"]},{"$$mdtype":"Tag","name":"p","attributes":{},"children":[".gitignore"]},{"$$mdtype":"Tag","name":"ul","attributes":{},"children":[{"$$mdtype":"Tag","name":"li","attributes":{},"children":["동작 확인 시 .next, out 디렉토리 자동생성됨"]},{"$$mdtype":"Tag","name":"li","attributes":{},"children":["굳이 push 할 필요 없으므로 .gitignore 작성"]}]},{"$$mdtype":"Tag","name":"Fence","attributes":{},"children":["node_modules\n.next\nout\n"]},{"$$mdtype":"Tag","name":"p","attributes":{},"children":[".github/workflows/gh-pages.yml"]},{"$$mdtype":"Tag","name":"Fence","attributes":{"data-language":"yml"},"children":["name: github pages\n\n# main브랜치에 push했을 때 jobs에 기술한 명령이 실행됨\non:\n  push:\n    branches:\n      - main\n\njobs:\n  build-deploy:\n    # 가상머신에 ubuntu OS를 설정\n    # Node.js 환경 설정\n    runs-on: ubuntu-latest\n    steps:\n      - uses: actions/checkout@v3\n      - uses: actions/setup-node@v3\n        with:\n          persist-credentials: false\n          node-version: 16\n\n      # package.json 내 패키지 설치\n      - name: install\n        run: npm install\n\n      # Next.js 앱 빌드\n      # 프로젝트 root 디렉토리에 .next 디렉토리 생성됨\n      - name: build\n        run: npm run build\n\n      # Next.js 앱을 정적인 HTML로 변환해 생성\n      # 프로젝트 root 디렉토리에 out 디렉토리 생성됨\n      # 해당 디렉토리 내부에는 HTML 파일들과 _next 디렉토리가 생성됨\n      # _next 디렉토리 내부에는 HTML 파일과 연결되는 JS파일이 존재\n      - name: export\n        run: npm run export\n        env:\n          CI: true\n          DEPLOY_TARGET: gh-pages\n\n      # github pages는 jekyll기반으로 페이지를 생성\n      # HTML과 JS 연결이 안 돼 404가 반환됨\n      # .nojekyll 파일을 out 디렉토리에 생성해 이를 회피\n      - name: add nojekyll\n        run: touch out/.nojekyll\n\n      # gh-pages 브랜치에 out 디렉토리의 파일 push\n      # gh-pages 브랜치는 자동 생성됨\n      - name: deploy\n        uses: JamesIves/github-pages-deploy-action@3.7.1\n        with:\n          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}\n          BRANCH: gh-pages\n          FOLDER: out\n          CLEAN: true\n\n"]},{"$$mdtype":"Tag","name":"p","attributes":{},"children":["리포지토리 생성"]},{"$$mdtype":"Tag","name":"ul","attributes":{},"children":[{"$$mdtype":"Tag","name":"li","attributes":{},"children":["유저명.github.io로 생성"]},{"$$mdtype":"Tag","name":"li","attributes":{},"children":["다른 이름 쓸 경우 해당 github pages URL https://유저명.github.io/리포지토리명"]},{"$$mdtype":"Tag","name":"li","attributes":{},"children":["위 yml에서 설정한 브랜치에 push되면 자동으로 github actions 실행됨"]}]},{"$$mdtype":"Tag","name":"p","attributes":{},"children":["githu page source 변경"]},{"$$mdtype":"Tag","name":"ul","attributes":{},"children":[{"$$mdtype":"Tag","name":"li","attributes":{},"children":["Branch:gh-pages/(root)로"]}]}]},"frontmatter":{"title":"next.js, github action으로 배포하기","date":"2022-10-13","tags":"next.js github-action"},"file":{"path":"/docs/221013-github-action.md"}}},"__N_SSG":true}