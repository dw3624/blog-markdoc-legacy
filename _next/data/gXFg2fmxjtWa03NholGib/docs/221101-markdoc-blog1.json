{"pageProps":{"markdoc":{"content":{"$$mdtype":"Tag","name":"article","attributes":{},"children":[{"$$mdtype":"Tag","name":"Heading","attributes":{"level":2,"id":"개요"},"children":["개요"]},{"$$mdtype":"Tag","name":"p","attributes":{},"children":["어느날 보니 github 블로그에 접속이 되지 않았습니다."," ","찾아보니 아무래도 사용하던 jekyll theme에 에러가 난 듯 합니다..."," ","같은 theme을 사용하던 사람들 사이에서도 비슷한 현상이 보이고, 해당 theme의 demo 페이지도 못들어갔습니다."]},{"$$mdtype":"Tag","name":"p","attributes":{},"children":["제 github 블로그는 초라하긴 하지만 포트폴리오를 겸하고도 있고,,,"," ","종종 들어가 이전 기록을 확인하기도 해서 다시 만들기로 했습니다."]},{"$$mdtype":"Tag","name":"p","attributes":{},"children":["jekyll을 이용하면 쉽게 만들순 있지만 구조에 대해 잘 몰라서 통제가 어려웠습니다."," ","이참에 프론트엔드 공부도 할 겸 직접 웹블로그를 구현해 보기로 했습니다."]},{"$$mdtype":"Tag","name":"p","attributes":{},"children":["github pages와 next.js를 이용해 마크다운 파일을 게시물로 보여주는 정적 웹블로그를 만들기로 합니다."," ","마크다운을 파싱하는 라이브러리로는 ",{"$$mdtype":"Tag","name":"code","attributes":{},"children":["marked"]},"와 ",{"$$mdtype":"Tag","name":"code","attributes":{},"children":["markdoc"]}," 등이 있는 것 같습니다."," ","간단히 구축해보니 ",{"$$mdtype":"Tag","name":"code","attributes":{},"children":["marked"]},"는 조금 무겁게 느껴져 ",{"$$mdtype":"Tag","name":"code","attributes":{},"children":["markdoc"]},"을 쓰기로 했습니다."]},{"$$mdtype":"Tag","name":"Heading","attributes":{"level":2,"id":"개발환경"},"children":["개발환경"]},{"$$mdtype":"Tag","name":"ul","attributes":{},"children":[{"$$mdtype":"Tag","name":"li","attributes":{},"children":["Next.js"]},{"$$mdtype":"Tag","name":"li","attributes":{},"children":["Markdoc"]},{"$$mdtype":"Tag","name":"li","attributes":{},"children":["javascript"]},{"$$mdtype":"Tag","name":"li","attributes":{},"children":["stlyed-components"]},{"$$mdtype":"Tag","name":"li","attributes":{},"children":["github pages"]},{"$$mdtype":"Tag","name":"li","attributes":{},"children":["github actions"]}]},{"$$mdtype":"Tag","name":"blockquote","attributes":{},"children":[{"$$mdtype":"Tag","name":"p","attributes":{},"children":[{"$$mdtype":"Tag","name":"strong","attributes":{},"children":[{"$$mdtype":"Tag","name":"a","attributes":{"href":"https://markdoc.dev/"},"children":["Markdoc"]}]}," ","Markdoc은 Stripe에서 개발한 문서 작성 프레임워크입니다. 마크다운을 파싱해 웹사이트로 볼 수 있게 해줍니다."]}]},{"$$mdtype":"Tag","name":"Heading","attributes":{"level":2,"id":"1.-세팅"},"children":["1. 세팅"]},{"$$mdtype":"Tag","name":"Heading","attributes":{"level":3,"id":"next.js"},"children":["Next.js"]},{"$$mdtype":"Tag","name":"Heading","attributes":{"level":4,"id":"프로젝트-생성"},"children":["프로젝트 생성"]},{"$$mdtype":"Tag","name":"Fence","attributes":{"data-language":"bash"},"children":["$ npx create-next-app@latest 프로젝트명\n$ cd next-blog\n$ npm run dev\n"]},{"$$mdtype":"Tag","name":"Heading","attributes":{"level":4,"id":"-설정"},"children":[{"$$mdtype":"Tag","name":"code","attributes":{},"children":[".eslintrc.json"]}," 설정"]},{"$$mdtype":"Tag","name":"Fence","attributes":{"data-language":"javascript"},"children":["{\n  \"extends\": [\"next/babel\",\"next/core-web-vitals\", \"next/core-web-vitals\"]\n}\n"]},{"$$mdtype":"Tag","name":"Heading","attributes":{"level":3,"id":"styled-components"},"children":["styled-components"]},{"$$mdtype":"Tag","name":"Fence","attributes":{"data-language":"bash"},"children":["$ npm i styled-components\n$ npm i --save-dev babel-plugin-styled-components\n를를\n\n# typescript를 사용할 경우 아래도 같이 설치합니다.\n$ npm i --save-dev @types/styled-components\n"]},{"$$mdtype":"Tag","name":"Heading","attributes":{"level":4,"id":"root-폴더에-생성"},"children":["root 폴더에 ",{"$$mdtype":"Tag","name":"code","attributes":{},"children":[".babelrc"]}," 생성"]},{"$$mdtype":"Tag","name":"Fence","attributes":{"data-language":"javascript"},"children":["{\n  \"presets\": [\"next/babel\"],\n  \"plugins\": [\n    [\n      \"styled-components\",\n        {\n          \"ssr\": true, // 서버사이드 렌더링 옵션\n          \"displayName\": true, // 태그 class명에 디렉토리, 컴포넌트명 추가\n          \"preprocess\": false\n        }\n    ]\n  ]\n}\n"]},{"$$mdtype":"Tag","name":"Heading","attributes":{"level":4,"id":"pages-폴더에-생성"},"children":["pages 폴더에 ",{"$$mdtype":"Tag","name":"code","attributes":{},"children":["_document.js"]}," 생성"]},{"$$mdtype":"Tag","name":"Fence","attributes":{"data-language":"javascript"},"children":["import Document from 'next/document';\nimport { ServerStyleSheet } from 'styled-components';\n\nclass CustomDocument extends Document {\n  static async getInitialProps(ctx) {\n    const sheet = new ServerStyleSheet();\n    const originalRenderPage = ctx.renderPage;\n\n    try {\n      ctx.renderPage = () =>\n        originalRenderPage({\n          enhanceApp: App => props => sheet.collectStyles(<App {...props} />)\n        });\n\n      const initialProps = await Document.getInitialProps(ctx);\n\n      return {\n        ...initialProps,\n        styles: (\n          <>\n            {initialProps.styles}\n            {sheet.getStyleElement()}\n          </>\n        )\n      };\n    } catch (error) {\n      throw error;\n    } finally {\n      sheet.seal();\n    }\n  }\n}\n\nexport default CustomDocument;\n"]},{"$$mdtype":"Tag","name":"p","attributes":{},"children":["Typescript를 사용할 경우 아래와 같이 작성합니다."]},{"$$mdtype":"Tag","name":"Fence","attributes":{"data-language":"javascript"},"children":["import Document, { Html, Head, Main, NextScript, DocumentContext } from \"next/document\";\nimport { ServerStyleSheet } from \"styled-components\";\n\nclass MyDocument extends Document {\n    static async getInitialProps(ctx: DocumentContext) {\n        const sheet = new ServerStyleSheet()\n        const originalRenderPage = ctx.renderPage\n\n        try {\n            ctx.renderPage = () =>\n                originalRenderPage({\n                enhanceApp: (App) => (props) =>\n                    sheet.collectStyles(<App {...props} />),\n                })\n\n            const initialProps = await Document.getInitialProps(ctx)\n            return {\n                ...initialProps,\n                styles: (\n                <>\n                    {initialProps.styles}\n                    {sheet.getStyleElement()}\n                </>\n                ),\n            }\n        } finally {\n            sheet.seal()\n        }\n    }\n\n    render() {\n        return (\n            <Html lang=\"en\">\n                <Head>\n                </Head>\n                <body>\n                    <Main />\n                    <NextScript />\n                </body>\n            </Html>\n        );\n    }\n}\n\nexport default MyDocument;\n"]},{"$$mdtype":"Tag","name":"Heading","attributes":{"level":3,"id":"markdoc"},"children":["Markdoc"]},{"$$mdtype":"Tag","name":"Fence","attributes":{"data-language":"bash"},"children":["$ npm i @markdoc/next.js @markdoc/markdoc\n"]},{"$$mdtype":"Tag","name":"Heading","attributes":{"level":4,"id":"-설정"},"children":[{"$$mdtype":"Tag","name":"code","attributes":{},"children":["next.config.js"]}," 설정"]},{"$$mdtype":"Tag","name":"p","attributes":{},"children":["수정 후 터미널을 재시작해 변경내용을 적용시킵니다."]},{"$$mdtype":"Tag","name":"Fence","attributes":{"data-language":"javascript"},"children":["/* @type {import('next').NextConfig} */\n\nconst withMarkdoc = require('@markdoc/next.js')\nconst nextConfig = {\n  reactStrictMode: true,\n  swcMinify: true,\n  pageExtensions: ['js', 'jsx', 'ts', 'tsx', 'md', 'mdoc'],\n}\n\nmodule.exports = withMarkdoc()(nextConfig)\n"]},{"$$mdtype":"Tag","name":"Heading","attributes":{"level":2,"id":"2.-디렉토리-구성"},"children":["2. 디렉토리 구성"]},{"$$mdtype":"Tag","name":"Fence","attributes":{},"children":[".-- components\n|-- lib\n|-- markdoc\n|   |-- nodes\n|   |-- functions\n|   `-- tags\n`-- pages\n|   `-- docs\n`-- styles\n"]},{"$$mdtype":"Tag","name":"Heading","attributes":{"level":2,"id":"3.-메인페이지"},"children":["3. 메인페이지"]},{"$$mdtype":"Tag","name":"p","attributes":{},"children":["처음 접속했을 때 뜨는 메인화면을 먼저 만들어봅니다."," ","마크다운의 헤더에서 정보를 가져올 수 있도록 ",{"$$mdtype":"Tag","name":"code","attributes":{},"children":["_app.js"]},"를 수정합니다."]},{"$$mdtype":"Tag","name":"Heading","attributes":{"level":3,"id":"_app.js"},"children":["_app.js"]},{"$$mdtype":"Tag","name":"Fence","attributes":{"data-language":"javascript"},"children":["import styled from 'styled-components';\nimport TopNav from '../components/Shell/TopNav';\nimport { useRouter } from 'next/router';\nimport './../styles/GlobalStyle.css';\n\nconst TITLE = 'The first docs of markdoc';\nconst DESC = 'Here is a desctiption statement';\n\nfunction MyApp({ Component, pageProps }) {\n  const {markdoc} = pageProps\n  const router = useRouter()\n\n  let title = TITLE\n  let desc = DESC\n  let date = null\n  let tags = null\n\n  if (markdoc) {\n    if (markdoc.frontmatter.title) {\n      title = markdoc.frontmatter.title;\n    }\n    if (markdoc.frontmatter.desc) {\n      desc = markdoc.frontmatter.desc;\n    }\n    if (markdoc.frontmatter.date) {\n      date = markdoc.frontmatter.date;\n    }\n    if (markdoc.frontmatter.tags) {\n      tags = markdoc.frontmatter.tags;\n    }\n  }\n\n  // 메인페이지의 경우 True 반환\n  const isLanding = router.pathname === '/';\n\n  return (\n    <>\n      <Wrap>\n        <TopNav/>\n        <WrapPage>\n          <WrapMain isLanding={isLanding}>\n            <Main>\n              <Component {...pageProps} />\n            </Main>\n          </WrapMain>\n        </WrapPage>\n      </Wrap>\n      <Footer/>\n    </>\n  )\n}\n\nexport default MyApp\n\nconst Wrap = styled.div`\n  height: auto;\n`\nconst WrapPage = styled.div`\n  margin: 0 auto;\n  padding-top: 24px 24px 0;\n  max-width: 1280px;\n`\nconst WrapMain = styled.div`\n  display: flex;\n  flex-grow: 1;\n  max-width: 100vw;\n  padding: ${props => props.isLanding? '2rem 1.5rem 3rem': ''};\n`\nconst Main = styled.div`\n  flex: 1;\n  flex-grow: 1;\n  min-width: 0;\n  padding: ${props => props.isDocs? '2rem 1.5rem 3rem': ''};\n`\n"]},{"$$mdtype":"Tag","name":"Heading","attributes":{"level":2,"id":"4.-헤더"},"children":["4. 헤더"]},{"$$mdtype":"Tag","name":"p","attributes":{},"children":["헤더 네비게이션 컴포넌트도 만들어줍니다."]},{"$$mdtype":"Tag","name":"Fence","attributes":{"data-language":"javascript"},"children":["import React from 'react';\nimport Link from \"next/link\"\nimport styled from 'styled-components';\n\nexport const TopNav = () => {\n  return (\n    <Header>\n      <Nav>\n        <NavContent>\n          <Link href='/'>\n            <Logo href='/'>logo</Logo>\n          </Link>\n          <Section>\n            <Link href='/docs'>\n              <MenuLink href='/docs'>Docs</MenuLink>\n            </Link>\n          </Section>\n        </NavContent>\n      </Nav>\n    </Header>\n  )\n}\n\nconst Header = styled.header`\n  top: 0;\n  position: sticky;\n  z-index: 1;\n  width: 100%;\n`\nconst Nav = styled.nav`\n  width: 100%;\n  background-color: var(--primary);\n  border-bottom: 1px solid transparent;\n`\nconst NavContent = styled.div`\n  display: flex;\n  gap: 1rem;\n  max-width: 1280px;\n  margin: 0 auto;\n  align-items: flex-end;\n  justify-content: space-between;\n  padding: 1rem 2rem 1.1rem;\n  font-size: 15px;\n  font-family: var(--sans);\n`\nconst Logo = styled.a`\n  font-size: 25px;\n  font-weight: 700;\n  text-decoration: none;\n  transition: all 0.2s ease;\n  &:hover{\n    color: var(--accent);\n    transform: scale(1.08);\n    opacity: 1;\n  }\n`\nconst Section = styled.section`\n  display: flex;\n  align-items: center;\n  gap: 1.3rem;\n  padding: 0;\n  @media screen and (max-width: 600px) {\n    display: none;\n  }\n`\nconst MenuLink = styled.a`\n  color: var(--dark);\n  text-decoration: none;\n  font-weight: 600;\n  transition: all .2s ease;\n  &:hover{\n    color: var(--accent);\n    transform: translateY(-0.2rem);\n    opacity:1;\n  }\n  &:active{\n    color: var(--accent);\n    transform: translateY(0.2rem);\n  }\n`\n"]},{"$$mdtype":"Tag","name":"Heading","attributes":{"level":2,"id":"마무리"},"children":["마무리"]},{"$$mdtype":"Tag","name":"p","attributes":{},"children":["이제 기본적인 구조가 완성됐습니다."," ",{"$$mdtype":"Tag","name":"code","attributes":{},"children":["pages/index.md"]},"를 생성해 마크다운 파일이 문제없이 렌더링되는지 확인해봅니다."," ","기존 ",{"$$mdtype":"Tag","name":"code","attributes":{},"children":["index.js"]},"는 삭제해도 무방합니다."]},{"$$mdtype":"Tag","name":"Fence","attributes":{},"children":["---\ntitle: Markdoc 블로그\ndesc: Hello World\n---\n\n# ","마크다운 블로그 만들어보기",null,"\n\n"]}]},"frontmatter":{"title":"마크다운 블로그 만들어보기","tags":"Next.js  Markdoc"},"file":{"path":"/docs/221101-markdoc-blog1.md"}}},"__N_SSG":true}